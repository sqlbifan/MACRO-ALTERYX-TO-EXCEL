{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "name": "dataset"
  },
  "title": {
    "text": ["בחר מדד למיון"],
    "orient": "top",
    "anchor": "middle"
  },
  "config": {
    "view": {"stroke": null},
    "axis": {"grid": false, "domain": false}
  },
  "params": [
    {
      "name": "Selector",
      "select": {
        "type": "point", 
        "fields": ["NAME"]
      }
    }
  ],
  "layer": [
    {
      // שכבה 1: הרקע המלבני והגבולות לצורך בחירה
      "mark": {
        "type": "rect",
        "cursor": "pointer" // מראה סמן יד כשלחיץ
      },
      "encoding": {
        "x": {
          "field": "NAME",
          "type": "ordinal",
          "axis": null, // מסתיר את ציר X
          "sort": ["B", "A"] // מסדר את "B" משמאל ואת "A" מימין (כמו בתמונה)
        },
        "opacity": {"value": 0}, // מלבן שקוף (רק לצורך לכידת אירועי לחיצה)
        // מסגרת תנאית שמסמנת את הפריט הנבחר
        "stroke": {
          "condition": {
            "param": "Selector",
            "field": "NAME",
            "value": "darkblue" // צבע הגבול לפריט שנבחר
          },
          "value": null
        },
        "strokeWidth": {
          "condition": {
            "param": "Selector",
            "field": "NAME",
            "value": 3
          },
          "value": 1 // גבול דק כשהוא לא נבחר
        }
      }
    },
    {
      // שכבה 2: סימון התמונה
      "mark": {
        "type": "image",
        "width": 100, // רוחב התמונה
        "height": 50, // גובה התמונה
        "align": "center",
        "baseline": "middle"
      },
      "encoding": {
        "x": {
          "field": "NAME",
          "type": "ordinal",
          "axis": null,
          "sort": ["B", "A"] // סידור זהה לרקע המלבני
        },
        "url": {"field": "URL", "type": "nominal"}, // URL התמונה מהעמודה
        "opacity": {
          "condition": {
            "param": "Selector",
            "field": "NAME",
            "value": 1 // אטום כשנבחר
          },
          "value": 0.5 // שקוף למחצה כשלא נבחר
        },
        "tooltip": [
          {"field": "NAME", "title": "אפשרות"},
          {"field": "URL", "title": "כתובת תמונה"}
        ]
      }
    },
    {
        // שכבה 3: טקסט התיאור מתחת לתמונה (כמו "מרווח" ו"ביצוע")
        "mark": {
            "type": "text",
            "dy": 40, // מיקום הטקסט מתחת לתמונה (התאם לפי הצורך)
            "fontWeight": "bold"
        },
        "encoding": {
            "x": {
              "field": "NAME",
              "type": "ordinal",
              "axis": null,
              "sort": ["B", "A"]
            },
            "text": {
                "field": "NAME",
                "type": "nominal"
            }
        }
    }
  ]
}
